<!DOCTYPE html>
<html>
<head>
  <title>User Meal Record Tracking</title>
  <style>
    /* CSS styles for the meal table */
    #mealTable {
      border-collapse: collapse;
    }

    #mealTable th,
    #mealTable td {
      border: 1px solid black;
      padding: 8px;
    }

    #mealTable .date-cell {
      font-weight: bold;
    }

    #mealTable tbody tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    /* CSS styles for the meal results table */
    #mealResultsTable {
      border-collapse: collapse;
      width: 100%;
    }

    #mealResultsTable th,
    #mealResultsTable td {
      border: 1px solid black;
      padding: 8px;
    }

    #mealResultsTable tbody tr:nth-child(even) {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>
  <h1>User Meal Record Tracking</h1>

<!-- User Input Form -->
<form id="mealForm">
  <div style="display: flex; flex-direction: row;">
    <div style="margin-right: 20px;">
      <label for="lunchSearchInput1">Lunch Dish 1:</label>
      <input type="text" id="lunchSearchInput1" name="lunchDishes[]" autocomplete="off">
      <br>
  
      <label for="lunchSearchInput2">Lunch Dish 2:</label>
      <input type="text" id="lunchSearchInput2" name="lunchDishes[]" autocomplete="off">
      <br>
  
      <label for="lunchSearchInput3">Lunch Dish 3:</label>
      <input type="text" id="lunchSearchInput3" name="lunchDishes[]" autocomplete="off">
      <br>
  
      <label for="lunchSearchInput4">Lunch Dish 4:</label>
      <input type="text" id="lunchSearchInput4" name="lunchDishes[]" autocomplete="off">
      <br>
  
      <label for="lunchSearchInput5">Lunch Dish 5:</label>
      <input type="text" id="lunchSearchInput5" name="lunchDishes[]" autocomplete="off">
      <br>
    </div>
  
    <div>
      <label for="dinnerSearchInput1">Dinner Dish 1:</label>
      <input type="text" id="dinnerSearchInput1" name="dinnerDishes[]" autocomplete="off">
      <br>
  
      <label for="dinnerSearchInput2">Dinner Dish 2:</label>
      <input type="text" id="dinnerSearchInput2" name="dinnerDishes[]" autocomplete="off">
      <br>
  
      <label for="dinnerSearchInput3">Dinner Dish 3:</label>
      <input type="text" id="dinnerSearchInput3" name="dinnerDishes[]" autocomplete="off">
      <br>
  
      <label for="dinnerSearchInput4">Dinner Dish 4:</label>
      <input type="text" id="dinnerSearchInput4" name="dinnerDishes[]" autocomplete="off">
      <br>
  
      <label for="dinnerSearchInput5">Dinner Dish 5:</label>
      <input type="text" id="dinnerSearchInput5" name="dinnerDishes[]" autocomplete="off">
      <br>
    </div>
  </div>
  
  <button type="submit">Submit</button>
</form>

  <!-- Suggestions List -->
  <ul id="suggestionsList"></ul>

  <!-- Display Results -->
  <div id="resultsContainer">
    <h2>Results</h2>
    <p>Date: <span id="dateDisplay"></span></p>
    <table id="mealResultsTable">
  <tr>
    <th>Nutrient</th>
    <th>Intake</th>
    <th>Percentage</th>
  </tr>
  <tr>
    <td>Energy</td>
    <td id="meal_energy"></td>
    <td id="meal_energy_percentage"></td>
  </tr>
  <tr>
    <td>Protein</td>
    <td id="meal_protein"></td>
    <td id="meal_protein_percentage"></td>
  </tr>
  <tr>
    <td>Fats</td>
    <td id="meal_fats"></td>
    <td id="meal_fats_percentage"></td>
  </tr>
  <tr>
    <td>Carbohydrates</td>
    <td id="meal_carbohydrates"></td>
    <td id="meal_carbohydrates_percentage"></td>
  </tr>
  <tr>
    <td>Fiber</td>
    <td id="meal_fiber"></td>
    <td id="meal_fiber_percentage"></td>
  </tr>
  <tr>
    <td>Calcium</td>
    <td id="meal_calcium"></td>
    <td id="meal_calcium_percentage"></td>
  </tr>
  <tr>
    <td>Saturated Fat</td>
    <td id="meal_saturatedFat"></td>
    <td id="meal_saturatedFat_percentage"></td>
  </tr>
  <tr>
    <td>Cholesterol</td>
    <td id="meal_cholesterol"></td>
    <td id="meal_cholesterol_percentage"></td>
  </tr>
  <tr>
    <td>Sugar</td>
    <td id="meal_sugar"></td>
    <td id="meal_sugar_percentage"></td>
  </tr>
  <tr>
    <td>Sodium</td>
    <td id="meal_sodium"></td>
    <td id="meal_sodium_percentage"></td>
  </tr>
</table>
  </div>
    <!-- Today's Data and Meals Section -->
    <div id="todayDataAndMeals">
      <h2>Today's Data and Meals</h2>
      <h3>Meals:</h3>
      <ul>
        <li>Lunch: <span id="lunchMeal"></span></li>
        <li>Dinner: <span id="dinnerMeal"></span></li>
      </ul>
      <div id="commentArea"></div> <!-- Added comment area -->
    </div>

  <!-- Table to display meal results -->
  <table id="mealTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Lunch Dish</th>
        <th>Dinner Dish</th>
        <th>More</th>
        <th>Less</th>
        <th>Enough</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="date1">Date 1</td>
        <td id="lunchDish1">Lunch Dish 1</td>
        <td id="dinnerDish1">Dinner Dish 1</td>
        <td id="more1">More 1</td>
        <td id="less1">Less 1</td>
        <td id="enough1">Enough 1</td>
      </tr>
      <tr>
        <td id="date2">Date 2</td>
        <td id="lunchDish2">Lunch Dish 2</td>
        <td id="dinnerDish2">Dinner Dish 2</td>
        <td id="more2">More 2</td>
        <td id="less2">Less 2</td>
        <td id="enough2">Enough 2</td>
      </tr>
      <!-- Add rows for the remaining 5 days with appropriate IDs and default values -->
      <tr>
        <td id="date3">Date 3</td>
        <td id="lunchDish3">Lunch Dish 3</td>
        <td id="dinnerDish3">Dinner Dish 3</td>
        <td id="more3">More 3</td>
        <td id="less3">Less 3</td>
        <td id="enough3">Enough 3</td>
      </tr>
      <tr>
        <td id="date4">Date 4</td>
        <td id="lunchDish4">Lunch Dish 4</td>
        <td id="dinnerDish4">Dinner Dish 4</td>
        <td id="more4">More 4</td>
        <td id="less4">Less 4</td>
        <td id="enough4">Enough 4</td>
      </tr>
      <tr>
        <td id="date5">Date 5</td>
        <td id="lunchDish5">Lunch Dish 5</td>
        <td id="dinnerDish5">Dinner Dish 5</td>
        <td id="more5">More 5</td>
        <td id="less5">Less 5</td>
        <td id="enough5">Enough 5</td>
      </tr>
      <tr>
        <td id="date6">Date 6</td>
        <td id="lunchDish6">Lunch Dish 6</td>
        <td id="dinnerDish6">Dinner Dish 6</td>
        <td id="more6">More 6</td>
        <td id="less6">Less 6</td>
        <td id="enough6">Enough 6</td>
      </tr>
      <tr>
        <td id="date7">Date 7</td>
        <td id="lunchDish7">Lunch Dish 7</td>
        <td id="dinnerDish7">Dinner Dish 7</td>
        <td id="more7">More 7</td>
        <td id="less7">Less 7</td>
        <td id="enough7">Enough 7</td>
      </tr>
    </tbody>
  </table>
  

  <button onclick="window.location.href='index.html'">Back to Main Page</button>
  <br>
  <button onclick="window.location.href='page1.html'" class="nav-button">Demographic Information</button>
  <button onclick="window.location.href='page2.html'" class="nav-button">BMR Calculator</button>
  <button onclick="window.location.href='page3.html'" class="nav-button">Dietary Preferences</button>
  <button onclick="window.location.href='page4.html'" class="nav-button">Food Database</button>
  <button onclick="window.location.href='page5.html'" class="nav-button">Meal Record Tracking</button>

  <script>
    // Function to get cookie by name
    function getCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }

    // Retrieve nutrient variables from cookies
    var E = parseFloat(getCookie('tedd'));
    var N_protein = parseFloat(getCookie('proteinLow'));
    var L_protein = parseFloat(getCookie('proteinHigh'));
    var N_fats = parseFloat(getCookie('fatsLow'));
    var L_fats = parseFloat(getCookie('fatsHigh'));
    var N_carbohydrates = parseFloat(getCookie('carbohydratesLow'));
    var L_carbohydrates = parseFloat(getCookie('carbohydratesHigh'));
    var N_fiber = parseFloat(getCookie('fiber'));
    var N_calcium = parseFloat(getCookie('calcium'));

    var gender = getCookie('sex');

    var N_saturatedFat = gender === 'female' ? 20 : 30;
    var N_sugar = gender === 'female' ? 24 : 36;
    var N_cholesterol = 300;
    var N_sodium = 2000;

    const csvFilePath = 'https://khchandm.student.ust.hk/ieda4920/categorized_selected_data_v1.csv';

    let data = [];

    // Fetch the CSV file
    fetch(csvFilePath)
        .then(response => response.text())
        .then(csvData => {
            // Parse the CSV data (you might need a more robust CSV parser)
            const rows = csvData.split('\n');
            const headers = rows[0].split(','); // Assuming the first row contains column headers
            const data = [];

            for (let i = 1; i < rows.length; i++) {
                const values = rows[i].split(',');
                const item = {};

                for (let j = 0; j < headers.length; j++) {
                    item[headers[j]] = values[j];
                }

                data.push(item);
            }

            // Now 'data' contains an array of objects representing each row in the CSV
            // console.log(data);
            // You can use this data to populate your table or perform other operations

            var dishNames = [...new Set(data.map(item => item['English Name']))]; // Set of dishes

            // Retrieve the meal results from the cookies
            function retrieveMealResults() {
              const cookies = document.cookie.split(';');
              let mealResults = {};

              for (const cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'mealResults') {
                  const cookieData = JSON.parse(value);
                  const date = cookieData.date.split('T')[0]; // Extract only the date portion
                  mealResults[date] = cookieData;
                }
              }

              return mealResults;
            }

            // Display the meal results for today and the past six days
            function displayMealResults() {
              const mealResults = retrieveMealResults();
              console.log(mealResults);

              if (Object.keys(mealResults).length) {
                const table = document.querySelector('#mealTable');
                const rows = table.querySelectorAll('tbody tr');

                // Get today's date and the past six days
                const dates = [];
                for (let i = 0; i < 7; i++) {
                  const date = new Date();
                  date.setDate(date.getDate() - i);
                  dates.push(date.toISOString().slice(0, 10));
                }

                // Display the meal results for these dates
                dates.forEach((date, i) => {
                  if (i < rows.length) {
                    const row = rows[i];
                    const dateCell = row.querySelector(`#date${i + 1}`);
                    const lunchDishCell = row.querySelector(`#lunchDish${i + 1}`);
                    const dinnerDishCell = row.querySelector(`#dinnerDish${i + 1}`);
                    const moreCell = row.querySelector(`#more${i + 1}`);
                    const lessCell = row.querySelector(`#less${i + 1}`);
                    const enoughCell = row.querySelector(`#enough${i + 1}`);

                    const mealData = mealResults[date] || {};
                    dateCell.textContent = new Date(date).toDateString();

                    lunchDishCell.textContent = mealData.lunchDishes?.join(', ') || '/';
                    dinnerDishCell.textContent = mealData.dinnerDishes?.join(', ') || '/';
                    moreCell.textContent = mealData.more?.join(', ') || '/';
                    lessCell.textContent = mealData.less?.join(', ') || '/';
                    enoughCell.textContent = mealData.enough?.join(', ') || '/';
                  }
                });
              } else {
                console.log('Meal results not found in cookies.');
              }
            }


            // Add event listeners for page load and submit button click
            window.addEventListener('load', displayMealResults);

            // Updated variable names
            const lunchSearchInputs = document.querySelectorAll('input[name^="lunchDishes"]');
            const dinnerSearchInputs = document.querySelectorAll('input[name^="dinnerDishes"]');
            const suggestionsList = document.getElementById("suggestionsList");

            lunchDishNames = dishNames;
            dinnerDishNames = dishNames;

            // Event listener for input changes - Lunch Dish Name
            lunchSearchInputs.forEach((input) => {
              input.addEventListener("input", () => {
                const userInput = input.value.toLowerCase();
                const filteredLunchDishes = lunchDishNames.filter((dish) =>
                  dish.toLowerCase().includes(userInput)
                );

                // Clear previous lunch suggestions
                suggestionsList.innerHTML = "";

                // Display filtered lunch suggestions
                filteredLunchDishes.forEach((dish) => {
                  const li = document.createElement("li");
                  li.textContent = dish;
                  suggestionsList.appendChild(li);
                });
              });
            });

            // Event listener for input changes - Dinner Dish Name
            dinnerSearchInputs.forEach((input) => {
              input.addEventListener("input", () => {
                const userInput = input.value.toLowerCase();
                const filteredDinnerDishes = dinnerDishNames.filter((dish) =>
                  dish.toLowerCase().includes(userInput)
                );

                // Clear previous dinner suggestions
                suggestionsList.innerHTML = "";

                // Display filtered dinner suggestions
                filteredDinnerDishes.forEach((dish) => {
                  const li = document.createElement("li");
                  li.textContent = dish;
                  suggestionsList.appendChild(li);
                });
              });
            });

            var dishNames = [...new Set(data.map(item => item['English Name'].toLowerCase()))]; // Set of dishes

            var c = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['price']])); // Price of each dish
            var e = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Energy (kcal)']])); // Energy of each dish
            var carb = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Total Carbohydrate']])); // Carbohydrate of each dish
            var protein = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Protein']])); // Protein of each dish
            var fat = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Total Fat']])); // Fat of each dish
            var sat_fat = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Saturated Fat']])); // Saturated fat of each dish
            var chol = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Chol']])); // Cholesterol of each dish
            var fiber = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Total Dietary Fiber']])); // Fiber of each dish
            var sugar = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Total Sugars']])); // Sugar of each dish
            var calcium = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Calcium']])); // Calcium of each dish
            var sodium = Object.fromEntries(data.map(item => [item['English Name'].toLowerCase(), item['Sodium']])); // Sodium of each dish

            //console.log('fetch');
            // Event listener for form submission
            var mealForm = document.querySelector('#mealForm');
            mealForm.addEventListener('submit', handleSubmit);

            // Function to retrieve nutrient information from the database
            function getNutrientsFromDatabase(dishName) {
                // Assuming 'data' is available in the scope

                // Retrieve the item from 'data' based on dishName
                const item = data.find(item => item['English Name'].toLowerCase() === dishName.toLowerCase());

                // Extract the required nutrient values
                const energy = parseFloat(e[dishName.toLowerCase()]);
                const price = parseFloat(c[dishName.toLowerCase()]);
                const carbohydrates = parseFloat(carb[dishName.toLowerCase()]);
                const proteinValue = parseFloat(protein[dishName.toLowerCase()]);
                const fatValue = parseFloat(fat[dishName.toLowerCase()]);
                const saturatedFat = parseFloat(sat_fat[dishName.toLowerCase()]);
                const cholesterol = parseFloat(chol[dishName.toLowerCase()]);
                const fiberValue = parseFloat(fiber[dishName.toLowerCase()]);
                const sugarValue = parseFloat(sugar[dishName.toLowerCase()]);
                const calciumValue = parseFloat(calcium[dishName.toLowerCase()]);
                const sodiumValue = parseFloat(sodium[dishName.toLowerCase()]);

                // Return an object with nutrient values
                return {
                    energy,
                    price,
                    carbohydrates,
                    protein: proteinValue,
                    fat: fatValue,
                    saturatedFat,
                    cholesterol,
                    fiber: fiberValue,
                    sugar: sugarValue,
                    calcium: calciumValue,
                    sodium: sodiumValue
                }
            }

            // Function to handle form submission
            function handleSubmit(event) {
              event.preventDefault();
              console.log('Form submitted');

              // Get the selected lunch dishes
              const selectedLunchDishes = [
                lunchSearchInput1.value,
                lunchSearchInput2.value,
                lunchSearchInput3.value,
                lunchSearchInput4.value,
                lunchSearchInput5.value
              ].filter(dish => dish !== "");;

              // Get the selected dinner dishes
              const selectedDinnerDishes = [
                dinnerSearchInput1.value,
                dinnerSearchInput2.value,
                dinnerSearchInput3.value,
                dinnerSearchInput4.value,
                dinnerSearchInput5.value
              ].filter(dish => dish !== "");;

              // Retrieve nutrient information for the selected lunch dishes from the database
              const lunchNutrients = selectedLunchDishes.map(getNutrientsFromDatabase);
              console.log(lunchNutrients);

              // Calculate the sum of the nutrients for lunch dishes
              const totalLunchNutrients = lunchNutrients.reduce((total, nutrients) => {
                for (const nutrient in nutrients) {
                  if (total.hasOwnProperty(nutrient)) {
                    total[nutrient] += nutrients[nutrient];
                  } else {
                    total[nutrient] = nutrients[nutrient];
                  }
                }
                return total;
              }, {});

              console.log(totalLunchNutrients);

              // Calculate the nutrient percentages for each lunch dish
              //const lunchPercentages = lunchNutrients.map((nutrients) => calculateNutrientPercentages(nutrients));

              // Retrieve nutrient information for the selected dinner dishes from the database
              const dinnerNutrients = selectedDinnerDishes.map(getNutrientsFromDatabase);

              // Calculate the sum of the nutrients for dinner dishes
              const totalDinnerNutrients = dinnerNutrients.reduce((total, nutrients) => {
                for (const nutrient in nutrients) {
                  if (total.hasOwnProperty(nutrient)) {
                    total[nutrient] += nutrients[nutrient];
                  } else {
                    total[nutrient] = nutrients[nutrient];
                  }
                }
                return total;
              }, {});

              // Calculate the nutrient percentages for each dinner dish
              //const dinnerPercentages = dinnerNutrients.map((nutrients) => calculateNutrientPercentages(nutrients));

              // Calculate the nutrient percentages for the entire lunch meal
              const lunchPercentages = calculateNutrientPercentages(totalLunchNutrients);

              // Calculate the nutrient percentages for the entire dinner meal
              const dinnerPercentages = calculateNutrientPercentages(totalDinnerNutrients);

              // Display the results for both lunch and dinner
              displayResults(totalLunchNutrients, lunchPercentages, totalDinnerNutrients, dinnerPercentages);

              // Define arrays to categorize nutrient percentages
              var more = [];
              var less = [];
              var enough = [];

              // Function to categorize a specific nutrient percentage
              function categorizeNutrient(percentage, recommended, nutrient) {
                intake = percentage;

                if (intake > 150) {
                  more.push(nutrient);
                } 
                else if (intake >= 50) {
                  enough.push(nutrient);
                } 
                else {
                  less.push(nutrient);
                }
              }

              // Function to categorize the nutrient percentages
              function categorizeNutrients(lunchPercentages, dinnerPercentages) {
                categorizeNutrient(lunchPercentages.energy + dinnerPercentages.energy, E, 'energy');
                categorizeNutrient(lunchPercentages.protein + dinnerPercentages.protein, N_protein, 'protein');
                categorizeNutrient(lunchPercentages.fats + dinnerPercentages.fats, N_fats, 'fats');
                categorizeNutrient(lunchPercentages.carbohydrates + dinnerPercentages.carbohydrates, N_carbohydrates, 'carbohydrates');
                categorizeNutrient(lunchPercentages.fiber + dinnerPercentages.fiber, N_fiber, 'fiber');
                categorizeNutrient(lunchPercentages.calcium + dinnerPercentages.calcium, N_calcium, 'calcium');
                categorizeNutrient(lunchPercentages.saturatedFat + dinnerPercentages.saturatedFat, N_saturatedFat, 'saturatedFat');
                categorizeNutrient(lunchPercentages.cholesterol + dinnerPercentages.cholesterol, N_cholesterol, 'cholesterol');
                categorizeNutrient(lunchPercentages.sugar + dinnerPercentages.sugar, N_sugar, 'sugar');
                categorizeNutrient(lunchPercentages.sodium + dinnerPercentages.sodium, N_sodium, 'sodium');
              }

              // Function to display the sentence for a specific nutrient category
              function displaySentence(category, action) {
                if (category.length > 0) {
                  const nutrients = category.join(', ');
                  const sentence = `You ${action} on ${nutrients}.`;
                  //console.log(sentence);
                  // Display the sentence in the desired location in the HTML
                  const commentArea = document.querySelector('#commentArea');
                  const sentenceElement = document.createElement('p');
                  sentenceElement.textContent = sentence;
                  commentArea.appendChild(sentenceElement);
                }
              }

              // Function to display the sentences for each nutrient category
              function displayNutrientSentences() {
                displaySentence(more, 'intake too much');
                displaySentence(less, 'need to intake more');
                displaySentence(enough, 'are doing well');
              }

              // Call the functions to categorize nutrients and display sentences
              categorizeNutrients(lunchPercentages, dinnerPercentages);
              displayNutrientSentences();

              // Update the meal names in the result display
              document.querySelector('#lunchMeal').textContent = selectedLunchDishes.join(', ');
              document.querySelector('#dinnerMeal').textContent = selectedDinnerDishes.join(', ');

              // Update the date display
              const currentDate = new Date();
              const formattedDate = currentDate.toDateString();
              document.querySelector('#dateDisplay').textContent = formattedDate;

              // Save the results in a cookie
              const cookieValue = JSON.stringify({
                date: currentDate.toISOString(),
                lunchDishes: selectedLunchDishes,
                dinnerDishes: selectedDinnerDishes,
                more: more,
                less: less,
                enough: enough
              });

              // Set the expiration date to 30 days from the current date
              const expirationDate = new Date(currentDate.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days in milliseconds
              const expirationString = expirationDate.toUTCString();

              document.cookie = `mealResults=${cookieValue}; expires=${expirationString}`;

              displayMealResults();
          }})
        .catch(error => {
            console.error('Error fetching CSV data:', error);
        });

    // Function to calculate nutrient percentages
    function calculateNutrientPercentages(nutrients) {
        // Calculate the nutrient percentages based on the retrieved data and intake requirement values
        //console.log(nutrients);
        const energyPercentage = calculatePercentage(nutrients.energy, E);
        const proteinPercentage = calculatePercentage(nutrients.protein, N_protein);
        const fatsPercentage = calculatePercentage(nutrients.fat, N_fats);
        const carbohydratesPercentage = calculatePercentage(nutrients.carbohydrates, N_carbohydrates);
        const fiberPercentage = calculatePercentage(nutrients.fiber, N_fiber);
        const calciumPercentage = calculatePercentage(nutrients.calcium, N_calcium);

        // Calculate additional nutrient percentages
        const saturatedFatPercentage = calculatePercentage(nutrients.saturatedFat, N_saturatedFat);
        const cholesterolPercentage = calculatePercentage(nutrients.cholesterol,  N_cholesterol);
        const sugarPercentage = calculatePercentage(nutrients.sugar, N_sugar);
        const sodiumPercentage = calculatePercentage(nutrients.sodium, N_sodium);

        // Return an object with all nutrient percentages
        return {
            energy: energyPercentage,
            protein: proteinPercentage,
            fats: fatsPercentage,
            carbohydrates: carbohydratesPercentage,
            fiber: fiberPercentage,
            calcium: calciumPercentage,
            saturatedFat: saturatedFatPercentage,
            cholesterol: cholesterolPercentage,
            sugar: sugarPercentage,
            sodium: sodiumPercentage
        };
    }

    // Function to display the results in the table
    function displayResults(lunchNutrients, lunchPercentages, dinnerNutrients, dinnerPercentages) {
        // Update the table cells with the retrieved nutrient values and percentages
        document.querySelector('#meal_energy').textContent = lunchNutrients.energy + dinnerNutrients.energy;
        //document.querySelector('#meal_energy_percentage').textContent = calculatePercentage(lunchPercentages.energy + dinnerPercentages.energy, E);
        document.querySelector('#meal_energy_percentage').textContent = lunchPercentages.energy + dinnerPercentages.energy;
        //console.log(lunchNutrients.energy, E);

        document.querySelector('#meal_protein').textContent = lunchNutrients.protein + dinnerNutrients.protein;
        document.querySelector('#meal_protein_percentage').textContent = lunchPercentages.protein + dinnerPercentages.protein;

        document.querySelector('#meal_fats').textContent = lunchNutrients.fat + dinnerNutrients.fat;
        document.querySelector('#meal_fats_percentage').textContent = lunchPercentages.fats + dinnerPercentages.fats;

        document.querySelector('#meal_carbohydrates').textContent = lunchNutrients.carbohydrates + dinnerNutrients.carbohydrates;
        document.querySelector('#meal_carbohydrates_percentage').textContent = lunchPercentages.carbohydrates + dinnerPercentages.carbohydrates;

        document.querySelector('#meal_fiber').textContent = lunchNutrients.fiber + dinnerNutrients.fiber;
        document.querySelector('#meal_fiber_percentage').textContent = lunchPercentages.fiber + dinnerPercentages.fiber;

        document.querySelector('#meal_calcium').textContent = lunchNutrients.calcium + dinnerNutrients.calcium;
        document.querySelector('#meal_calcium_percentage').textContent = lunchPercentages.calcium + dinnerPercentages.calcium;

        // Update the additional nutrient values and percentages
        document.querySelector('#meal_saturatedFat').textContent = lunchNutrients.saturatedFat + dinnerNutrients.saturatedFat;
        document.querySelector('#meal_saturatedFat_percentage').textContent = lunchPercentages.saturatedFat + dinnerPercentages.saturatedFat;

        document.querySelector('#meal_cholesterol').textContent = lunchNutrients.cholesterol + dinnerNutrients.cholesterol;
        document.querySelector('#meal_cholesterol_percentage').textContent = lunchPercentages.cholesterol + dinnerPercentages.cholesterol;

        document.querySelector('#meal_sugar').textContent = lunchNutrients.sugar + dinnerNutrients.sugar;
        document.querySelector('#meal_sugar_percentage').textContent = lunchPercentages.sugar + dinnerPercentages.sugar;

        document.querySelector('#meal_sodium').textContent = lunchNutrients.sodium + dinnerNutrients.sodium;
        document.querySelector('#meal_sodium_percentage').textContent = lunchPercentages.sodium + dinnerPercentages.sodium;
    }

    // Function to calculate the percentage
    function calculatePercentage(intake, requirement) {
        // Calculate the percentage based on the given value and low/high values
        const percentage = (intake / requirement) * 100;

        // Return the calculated percentage
        return percentage;
    }

  </script>
</body>
</html>